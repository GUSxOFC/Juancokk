<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GusOfcXD 404</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        html {
            scroll-behavior: smooth;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .background {
            position: absolute;
            top: -5%;
            left: -5%;
            width: 110%;
            height: 110%;
            background-image: url('https://files.catbox.moe/vgjj30.jpg');
            background-size: cover;
            background-position: center;
            animation: backgroundZoom 20s ease-in-out infinite alternate;
            z-index: -2;
        }

        @keyframes backgroundZoom {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(25, 0, 50, 0.6), rgba(0, 50, 100, 0.6));
            animation: gradientFlow 20s ease infinite;
            z-index: -1;
        }

        @keyframes gradientFlow {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 0.9; }
        }

        .container {
            width: 90%;
            max-width: 950px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(25px) saturate(200%);
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
            padding: 50px;
            animation: containerEntrance 1.2s cubic-bezier(0.075, 0.82, 0.165, 1);
            transition: transform 0.5s ease, box-shadow 0.5s ease;
        }

        .container:hover {
            transform: translateY(-10px) scale(1.01);
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.4);
        }

        @keyframes containerEntrance {
            from { opacity: 0; transform: translateY(80px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.25);
        }

        .profile-pic {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 4px solid #fff;
            object-fit: cover;
            transition: all 0.5s ease;
        }
        .profile-pic:hover { 
            transform: scale(1.2) rotate(-10deg); 
            box-shadow: 0 15px 30px rgba(0,0,0,0.4);
            border-color: #00c6ff;
        }

        .branding {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 28px;
            font-weight: 700;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        }

        .blue-checkmark {
            width: 32px;
            height: 32px;
            fill: #1d9bf0;
            animation: checkmarkBounce 3s infinite;
        }
        @keyframes checkmarkBounce { 0%, 80%, 100% { transform: scale(1); } 90% { transform: scale(1.3); } }

        .chat-admin-btn {
            background: rgba(0, 136, 204, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.4);
            padding: 12px 20px;
            border-radius: 25px;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            transition: all 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        .chat-admin-btn:hover {
            background: rgba(0, 136, 204, 0.9);
            transform: translateY(-8px) scale(1.1);
            box-shadow: 0 15px 30px rgba(0, 136, 204, 0.6);
        }
        .telegram-logo { width: 28px; height: 28px; fill: white; }

        h1 { text-align: center; margin-bottom: 15px; font-size: 32px; text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5); }
        .warning { 
            background: rgba(255, 107, 107, 0.25); 
            border-left: 5px solid #ff6b6b; 
            color: #fff; 
            padding: 18px; 
            border-radius: 10px; 
            margin-bottom: 30px; 
            font-weight: 600; 
            backdrop-filter: blur(5px);
            animation: warningGlow 10s infinite;
        }
        @keyframes warningGlow { 0%, 100% { box-shadow: 0 0 5px rgba(255, 107, 107, 0.5); } 50% { box-shadow: 0 0 20px rgba(255, 107, 107, 0.8); } }
        
        .auth-section { display: flex; flex-direction: column; gap: 20px; margin-bottom: 30px; }
        .button-group { display: flex; gap: 20px; }
        
        label { font-weight: 600; font-size: 14px; }
        input[type="password"] {
            width: 100%;
            padding: 18px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 15px;
            font-size: 16px;
            color: #fff;
            transition: all 0.5s ease;
        }
        input[type="password"]:focus { 
            outline: none; 
            background: rgba(255, 255, 255, 0.3); 
            border-color: #fff; 
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.7);
            transform: scale(1.03);
        }
        input[type="password"]::placeholder { color: rgba(255, 255, 255, 0.8); }
        
        button {
            padding: 18px 25px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            flex-grow: 1;
            position: relative;
            overflow: hidden;
        }
        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.7s, height 0.7s;
        }
        button:active::before {
            width: 400px;
            height: 400px;
        }

        .btn-primary { background: linear-gradient(45deg, #00c6ff, #0072ff); color: white; box-shadow: 0 8px 25px 0 rgba(31, 38, 135, 0.6); }
        .btn-secondary { background: linear-gradient(45deg, #f093fb, #f5576c); color: white; box-shadow: 0 8px 25px 0 rgba(245, 87, 108, 0.6); }
        button:hover { 
            transform: translateY(-8px) scale(1.08); 
            filter: brightness(1.2);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }
        button:disabled { background: grey; cursor: not-allowed; transform: none; filter: none; }

        .loader {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            margin: 20px auto;
        }
        .loader-dot {
            width: 12px;
            height: 12px;
            background: #fff;
            border-radius: 50%;
            animation: bounce-dots 1.4s infinite ease-in-out both;
        }
        .loader-dot:nth-child(1) { animation-delay: -0.32s; }
        .loader-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce-dots {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1.0);
            }
        }

        #message {
            position: fixed; top: 20px; right: 20px; padding: 18px 28px;
            border-radius: 15px; font-weight: 600; animation: messageEntrance 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 1000; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-width: 400px;
            word-wrap: break-word;
        }
        @keyframes messageEntrance {
            0% { opacity: 0; transform: translateX(100%) scale(0.5) rotate(10deg); }
            100% { opacity: 1; transform: translateX(0) scale(1) rotate(0); }
        }
        .success { background: linear-gradient(45deg, #56ab2f, #a8e063); color: white; }
        .error { background: linear-gradient(45deg, #ff416c, #ff4b2b); color: white; }
        #message a {
            color: #fff;
            text-decoration: underline;
            font-weight: 700;
        }

        .content-list {
            list-style-type: none; padding: 0; margin-top: 25px;
            max-height: 450px; overflow-y: auto; padding-right: 15px;
        }
        .content-list::-webkit-scrollbar { width: 12px; }
        .content-list::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
        .content-list::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.5); border-radius: 10px; }
        .content-list::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.7); }

        .content-list li {
            display: flex; justify-content: space-between; align-items: center;
            padding: 20px; margin-bottom: 15px; background: rgba(255, 255, 255, 0.1);
            border-radius: 15px; border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.5s ease;
            opacity: 0;
            transform: translateY(30px) perspective(1000px) rotateX(10deg);
            animation: listItemEntrance 0.6s forwards;
        }
        .content-list li:nth-child(1) { animation-delay: 0.05s; }
        .content-list li:nth-child(2) { animation-delay: 0.1s; }
        .content-list li:nth-child(3) { animation-delay: 0.15s; }
        .content-list li:nth-child(4) { animation-delay: 0.2s; }
        .content-list li:nth-child(5) { animation-delay: 0.25s; }
        .content-list li:nth-child(n+6) { animation-delay: 0.3s; }

        @keyframes listItemEntrance {
            to {
                opacity: 1;
                transform: translateY(0) perspective(1000px) rotateX(0);
            }
        }

        .content-list li:hover { 
            background: rgba(255, 255, 255, 0.2); 
            transform: translateX(15px) scale(1.03) perspective(1000px) rotateY(5deg);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            border-color: #fff;
        }
        
        .list-item-name { font-family: 'Courier New', Courier, monospace; word-break: break-all; font-weight: 600; }
        .list-item-details { font-size: 12px; color: rgba(255,255,255,0.8); margin-top: 5px; }
        
        .action-buttons-group {
            display: flex;
            gap: 10px;
        }

        .delete-btn { background: linear-gradient(45deg, #f85032, #e73827); color: white; padding: 12px 18px; font-size: 14px; box-shadow: 0 5px 20px rgba(231, 56, 39, 0.6); }
        .delete-btn:hover { transform: scale(1.1); box-shadow: 0 8px 25px rgba(231, 56, 39, 0.8); }
        
        .create-web-btn { background: linear-gradient(45deg, #11998e, #38ef7d); color: white; padding: 12px 18px; font-size: 14px; box-shadow: 0 5px 20px rgba(17, 153, 142, 0.6); }
        .create-web-btn:hover { transform: scale(1.1); box-shadow: 0 8px 25px rgba(56, 239, 125, 0.8); }

    </style>
</head>
<body>
    <div class="background"></div>
    <div class="overlay"></div>

    <div class="container">
        <header class="header">
            <img src="https://files.catbox.moe/vgjj30.jpg" alt="Profile" class="profile-pic">
            <div class="branding">
                GusOfcXD 404
                <svg class="blue-checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
            </div>
            <a href="https://t.me/gofc4004" target="_blank" class="chat-admin-btn" title="Hubungi Admin di Telegram">
                <svg class="telegram-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240"><circle cx="120" cy="120" r="120"/><path d="M98.9 157.3l-2.2-32.2 57.4-51.8c2.5-2.3-.6-3.4-3.9-1.4L78.3 113.8 46.7 104c-6.8-2.1-6.9-6.8 1.5-10.1l129.4-49.9c5.7-2.1 10.6 1.4 8.8 10.1l-22 103.7c-1.5 6.8-5.6 8.5-11.3 5.3l-31.2-23-15 14.5c-1.5 1.5-2.7 2.7-5.5 2.7z" fill="#fff"/></svg>
                Chat Admin
            </a>
        </header>

        <h1>Del Repostry</h1>
        
        <div class="warning">
            ‚ö†Ô∏è PERINGATAN: Tindakan ini PERMANEN. Repository yang dihapus tidak dapat dikembalikan, Pastikan Anda telah membackup data penting
        </div>

        <div id="auth-section" class="auth-section">
            <div>
                <label for="ghp-token">masukan ghp your github</label>
                <input type="password" id="ghp-token" placeholder="ghp_..." required>
            </div>
            <div class="button-group">
                <button type="submit" id="login-btn" class="btn-primary">Login</button>
            </div>
        </div>
        
        <div class="button-group" id="action-buttons" style="display: none;">
            <button id="fetch-repos-btn" class="btn-primary">Tampilkan Repository</button>
            <button id="check-history-btn" class="btn-secondary">Cek Riwayat GitHub</button>
        </div>

        <div id="loading" style="display: none;">
            <div class="loader">
                <div class="loader-dot"></div>
                <div class="loader-dot"></div>
                <div class="loader-dot"></div>
            </div>
        </div>

        <ul id="repo-list" class="content-list"></ul>
        <ul id="history-list" class="content-list"></ul>
    </div>

    <script>
        let githubToken = sessionStorage.getItem('githubToken');

        const authSection = document.getElementById('auth-section');
        const tokenInput = document.getElementById('ghp-token');
        const loginBtn = document.getElementById('login-btn');
        const actionButtons = document.getElementById('action-buttons');
        const fetchReposBtn = document.getElementById('fetch-repos-btn');
        const checkHistoryBtn = document.getElementById('check-history-btn');
        const repoList = document.getElementById('repo-list');
        const historyList = document.getElementById('history-list');
        const loadingDiv = document.getElementById('loading');

        document.addEventListener('DOMContentLoaded', () => {
            if (githubToken) {
                setLoggedInState();
                fetchAndDisplayRepos(githubToken);
            }
        });

        loginBtn.addEventListener('click', () => {
            const token = tokenInput.value;
            if (!token) {
                showMessage('Token tidak boleh kosong.', 'error');
                return;
            }
            githubToken = token;
            sessionStorage.setItem('githubToken', githubToken);
            setLoggedInState();
            fetchAndDisplayRepos(githubToken);
        });

        function setLoggedInState() {
            authSection.style.display = 'none';
            actionButtons.style.display = 'flex';
        }

        fetchReposBtn.addEventListener('click', () => fetchAndDisplayRepos(githubToken));
        checkHistoryBtn.addEventListener('click', () => fetchAndDisplayHistory(githubToken));

        async function fetchAndDisplayRepos(token) {
            setLoadingState(true);
            historyList.innerHTML = '';
            try {
                const response = await fetch('https://api.github.com/user/repos?per_page=100', {
                    headers: { 'Authorization': `token ${token}`, 'Accept': 'application/vnd.github.v3+json' }
                });
                if (!response.ok) throw new Error(`Gagal mengambil data: ${response.statusText}. Pastikan token valid dan memiliki izin 'repo'.`);
                const repos = await response.json();
                displayRepos(repos);
                showMessage(`Berhasil mengambil ${repos.length} repository.`, 'success');
            } catch (error) {
                showMessage(error.message, 'error');
            } finally {
                setLoadingState(false);
            }
        }

        function displayRepos(repos) {
            repoList.innerHTML = '';
            if (repos.length === 0) { repoList.innerHTML = '<li>Tidak ada repository yang ditemukan.</li>'; return; }
            repos.forEach(repo => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <div>
                        <div class="list-item-name">${repo.full_name}</div>
                        <div class="list-item-details">${repo.description || 'Tidak ada deskripsi'}</div>
                    </div>
                    <div class="action-buttons-group">
                        <button class="create-web-btn" data-repo-name="${repo.full_name}">Create Web</button>
                        <button class="delete-btn" data-repo-name="${repo.full_name}">Delete</button>
                    </div>
                `;
                repoList.appendChild(listItem);
            });
        }

        async function fetchAndDisplayHistory(token) {
            setLoadingState(true);
            repoList.innerHTML = '';
            try {
                const response = await fetch('https://api.github.com/user/events?per_page=100', {
                    headers: { 'Authorization': `token ${token}`, 'Accept': 'application/vnd.github.v3+json' }
                });
                if (!response.ok) throw new Error(`Gagal mengambil riwayat: ${response.statusText}.`);
                const events = await response.json();
                displayHistory(events);
                showMessage(`Berhasil mengambil riwayat terbaru.`, 'success');
            } catch (error) {
                showMessage(error.message, 'error');
            } finally {
                setLoadingState(false);
            }
        }

        function displayHistory(events) {
            historyList.innerHTML = '';
            if (events.length === 0) { historyList.innerHTML = '<li>Tidak ada riwayat.</li>'; return; }
            events.forEach(event => {
                const listItem = document.createElement('li');
                const eventType = event.type.replace('Event', '');
                const repoName = event.repo.name;
                const timeAgo = new Date(event.created_at).toLocaleString('id-ID');
                
                let message = '';
                if (eventType === 'Create') message = `Membuat repository <strong>${repoName}</strong>`;
                else if (eventType === 'Delete') message = `Menghapus repository <strong>${repoName}</strong>`;
                else if (eventType === 'Push') message = `Push ke <strong>${repoName}</strong>`;
                else if (eventType === 'IssuesEvent') message = `Aktivitas Issues di <strong>${repoName}</strong>`;
                else message = `${eventType} di <strong>${repoName}</strong>`;

                listItem.innerHTML = `
                    <div>
                        <div>${message}</div>
                        <div class="list-item-details">${timeAgo}</div>
                    </div>
                `;
                historyList.appendChild(listItem);
            });
        }

        repoList.addEventListener('click', async (event) => {
            const button = event.target;
            const repoName = button.dataset.repoName;
            if (!repoName) return;

            if (button.classList.contains('delete-btn')) {
                if (!confirm(`Yakin ingin menghapus "${repoName}"? Tindakan ini PERMANEN.`)) return;
                
                button.disabled = true; button.textContent = 'Menghapus...';
                try {
                    const response = await fetch(`https://api.github.com/repos/${repoName}`, {
                        method: 'DELETE', headers: { 'Authorization': `token ${githubToken}` }
                    });
                    if (response.ok) {
                        const listItem = button.closest('li');
                        listItem.style.transition = 'opacity 0.5s, transform 0.5s';
                        listItem.style.opacity = '0'; listItem.style.transform = 'translateX(50px)';
                        setTimeout(() => listItem.remove(), 500);
                        showMessage(`‚úÖ Repository "${repoName}" berhasil dihapus.`, 'success');
                    } else {
                        throw new Error(`Gagal menghapus ${repoName}.`);
                    }
                } catch (error) {
                    showMessage(error.message, 'error');
                    button.disabled = false; button.textContent = 'Delete';
                }
            }

            if (button.classList.contains('create-web-btn')) {
                button.disabled = true; button.textContent = 'Memeriksa...';
                const [username, repoNameOnly] = repoName.split('/');
                const siteUrl = `https://${username}.github.io/${repoNameOnly}/`;

                try {
                    const pagesResponse = await fetch(`https://api.github.com/repos/${repoName}/pages`, {
                        headers: { 'Authorization': `token ${githubToken}`, 'Accept': 'application/vnd.github.v3+json' }
                    });

                    if (pagesResponse.ok) {
                        showMessage(`üöÄ Website aktif! <br> Link: <a href="${siteUrl}" target="_blank">${siteUrl}</a>`, 'success');
                    } else if (pagesResponse.status === 404) {
                        showMessage(`File web ditemukan, tetapi GitHub Pages belum diaktifkan. Silakan aktifkan di Settings > Pages repository Anda. Nantinya linknya adalah: <a href="${siteUrl}" target="_blank">${siteUrl}</a>`, 'error');
                    } else {
                        throw new Error(`Gagal mengecek status GitHub Pages.`);
                    }

                } catch (error) {
                    showMessage(error.message, 'error');
                } finally {
                    button.disabled = false; button.textContent = 'Create Web';
                }
            }
        });

        function setLoadingState(isLoading) {
            loadingDiv.style.display = isLoading ? 'block' : 'none';
        }

        function showMessage(text, type) {
            const oldMessage = document.getElementById('message');
            if(oldMessage) oldMessage.remove();
            const messageDiv = document.createElement('div');
            messageDiv.id = 'message'; 
            messageDiv.innerHTML = text; 
            messageDiv.className = type;
            document.body.appendChild(messageDiv);
            setTimeout(() => messageDiv.remove(), 10000);
        }
    </script>
</body>
</html>
